＜はじめに＞

MachiKania type P/PU ver 1.5.2から、CPUのクロック周波数を変更できるようになりました。これは、2025/02/19のPico SDK ver 2.1.1の公開に伴い、Raspberry Pi Picoなどに採用されているマイクロコントローラー、RP2040の認定動作速度が、133 MHzから200 MHzに引き上げられたことに対応するものです。

MachiKaniaの起動時のCPUクロック周波数は、Type PかType PUかと、Raspberry Pi PicoなどのRP2040を用いた基板を使うかRaspberry Pi Pico 2などのRP2350を用いた基盤を使うかで異なっていて、以下の通りです。

	Type P + RP2040 : 125 MHz
	Type P + RP2350 : 150 MHz
	Type PU         : 157.5 MHz

従って、例えば200 MHzなどの異なるクロック周波数でBASICプログラムを実行したい場合は、プログラム中でクロック周波数を変更してください。また、必要に応じてCPUの電圧を、デフォルトの1.10Vから変更する必要があります。これらの変更は、SYSTEMステートメントを用いて行います。ラスベリーパイ財団が認定する200 MHzの速度で走らせたい場合、CPU電圧は1.15 V以上が必要なので、例えば次のように記述します。

	SYSTEM 51, 12
	SYSTEM 50, 200000000

これで、BASICプログラムを200 MHzのクロック速度で走らせることができるようになります。

＜Type PUでビデオ出力を行うとき＞

Type PUでNTSCビデオ出力を行う場合に対応できるクロック周波数は、157.5 MHzと315 MHzの２つだけです。315 MHzで使用したい場合は、次の例のように記述してください。また、この時カラーパレットが初期化されるので、カラーパレットの設定はクロック周波数変更後に行ってください。

	SYSTEM 51,15
	SYSTEM 50,315000000

なお、ビデオ出力が必要のない組み込む用途などで使う場合、157.5 MHz, 315 MHz だけではなく、ほかのクロック周波数も使えます。「SYSTEM 200,0」としてビデオ出力を停止すればよいでしょう。

＜CPU電圧＞

SYSTEM 51で設定できるCPU電圧は、以下の通りです。

	SYSTEM 51, 6  :REM 0.85 V
	SYSTEM 51, 7  :REM 0.90 V
	SYSTEM 51, 8  :REM 0.95 V
	SYSTEM 51, 9  :REM 1.00 V
	SYSTEM 51, 10 :REM 1.05 V
	SYSTEM 51, 11 :REM 1.10 V
	SYSTEM 51, 12 :REM 1.15 V
	SYSTEM 51, 13 :REM 1.20 V
	SYSTEM 51, 14 :REM 1.25 V
	SYSTEM 51, 15 :REM 1.30 V

RP2040の場合は上の表のとおりですが、RP2350ではこれより低い、もしくは高い電圧指定も出来ます。ただし、電圧を1.30 Vより高くしたからと言って、より速い実行速度が可能になるわけではないようです。

＜動作可能周波数＞

RP2040およびRP2350で使用可能なCPUクロック周波数(MHz単位で表示)は、以下の通りです。なお、SYSTEM 50は hz 単位での指定ですので、例えば20.00 MHzなら20000000と、100.00 MHzは100000000と指定してください。32.16 MHzならば、32160000です。

20.00, 21.00, 21.60, 22.00, 23.00, 24.00, 25.00, 25.20, 25.60, 26.00, 26.40, 26.80, 27.00, 27.20, 27.60, 28.00, 
28.40, 28.80, 29.00, 29.20, 29.60, 30.00, 30.24, 30.40, 30.72, 30.80, 31.00, 31.20, 31.50, 31.60, 31.68, 32.00, 
32.16, 32.40, 32.50, 32.64, 32.80, 33.00, 33.12, 33.20, 33.50, 33.60, 34.00, 34.08, 34.40, 34.50, 34.56, 34.80, 
35.00, 35.04, 35.20, 35.50, 35.52, 35.60, 36.00, 36.40, 36.48, 36.50, 36.80, 36.96, 37.00, 37.20, 37.44, 37.50, 
37.60, 37.80, 37.92, 38.00, 38.40, 38.50, 38.80, 38.88, 39.00, 39.20, 39.36, 39.50, 39.60, 39.84, 40.00, 40.20, 
40.32, 40.40, 40.50, 40.80, 41.00, 41.20, 41.28, 41.40, 41.50, 41.60, 41.76, 42.00, 42.24, 42.40, 42.50, 42.60, 
42.72, 42.80, 43.00, 43.20, 43.50, 43.60, 43.68, 43.80, 44.00, 44.16, 44.40, 44.50, 44.64, 44.80, 45.00, 45.12, 
45.20, 45.50, 45.60, 46.00, 46.08, 46.20, 46.40, 46.50, 46.56, 46.80, 47.00, 47.04, 47.20, 47.25, 47.40, 47.50, 
47.52, 47.60, 48.00, 48.40, 48.48, 48.50, 48.60, 48.75, 48.80, 48.96, 49.00, 49.20, 49.44, 49.50, 49.60, 49.80, 
49.92, 50.00, 50.25, 50.40, 50.50, 50.80, 50.88, 51.00, 51.20, 51.36, 51.50, 51.60, 51.75, 51.84, 52.00, 52.20, 
52.32, 52.40, 52.50, 52.80, 53.00, 53.20, 53.25, 53.28, 53.40, 53.50, 53.60, 53.76, 54.00, 54.24, 54.40, 54.50, 
54.60, 54.72, 54.75, 55.00, 55.20, 55.50, 55.68, 55.80, 56.00, 56.16, 56.25, 56.40, 56.50, 56.64, 56.80, 57.00, 
57.12, 57.50, 57.60, 57.75, 58.00, 58.08, 58.20, 58.40, 58.50, 58.56, 58.80, 59.00, 59.04, 59.20, 59.25, 59.40, 
59.50, 59.52, 60.00, 60.48, 60.50, 60.60, 60.75, 60.80, 60.96, 61.00, 61.20, 61.44, 61.50, 61.60, 61.80, 61.92, 
62.00, 62.25, 62.40, 62.50, 62.88, 63.00, 63.20, 63.36, 63.50, 63.60, 63.75, 63.84, 64.00, 64.20, 64.50, 64.80, 
65.00, 65.25, 65.40, 65.50, 65.60, 66.00, 66.40, 66.50, 66.60, 66.75, 67.00, 67.20, 67.50, 67.80, 68.00, 68.25, 
68.40, 68.80, 69.00, 69.60, 69.75, 70.00, 70.20, 70.40, 70.50, 70.80, 71.00, 71.20, 71.25, 71.40, 72.00, 72.60, 
72.75, 72.80, 73.00, 73.20, 73.50, 73.60, 73.80, 74.00, 74.25, 74.40, 75.00, 75.20, 75.60, 75.75, 76.00, 76.20, 
76.50, 76.80, 77.00, 77.25, 77.40, 77.60, 78.00, 78.40, 78.60, 78.75, 79.00, 79.20, 79.50, 79.80, 80.00, 80.25, 
80.40, 80.80, 81.00, 81.60, 81.75, 82.00, 82.40, 82.50, 82.80, 83.00, 83.20, 83.25, 84.00, 84.75, 84.80, 85.00, 
85.20, 85.50, 85.60, 86.00, 86.25, 86.40, 87.00, 87.20, 87.60, 87.75, 88.00, 88.50, 88.80, 89.00, 89.25, 89.60, 
90.00, 90.40, 90.75, 91.00, 91.20, 91.50, 92.00, 92.25, 92.40, 92.80, 93.00, 93.60, 93.75, 94.00, 94.40, 94.50, 
94.80, 95.00, 95.20, 95.25, 96.00, 96.75, 96.80, 97.00, 97.20, 97.50, 97.60, 98.00, 98.25, 98.40, 99.00, 99.20, 
99.60, 99.75, 100.00, 100.50, 100.80, 101.00, 101.60, 102.00, 102.40, 103.00, 103.20, 103.50, 104.00, 104.40, 104.80, 105.00, 
105.60, 106.00, 106.40, 106.50, 106.80, 107.00, 108.00, 109.00, 109.20, 109.50, 110.00, 110.40, 111.00, 111.60, 112.00, 112.50, 
112.80, 113.00, 114.00, 115.00, 115.20, 115.50, 116.00, 116.40, 117.00, 117.60, 118.00, 118.50, 118.80, 119.00, 120.00, 121.00, 
121.20, 121.50, 122.00, 122.40, 123.00, 123.60, 124.00, 124.50, 124.80, 125.00, 126.00, 127.00, 127.20, 127.50, 128.00, 128.40, 
129.00, 129.60, 130.00, 130.50, 130.80, 131.00, 132.00, 133.00, 133.20, 133.50, 134.00, 134.40, 135.00, 135.60, 136.00, 136.50, 
136.80, 138.00, 139.20, 139.50, 140.00, 140.40, 141.00, 141.60, 142.00, 142.50, 142.80, 144.00, 145.20, 145.50, 146.00, 146.40, 
147.00, 147.60, 148.00, 148.50, 148.80, 150.00, 151.20, 151.50, 152.00, 152.40, 153.00, 153.60, 154.00, 154.50, 154.80, 156.00, 
157.20, 157.50, 158.00, 158.40, 159.00, 159.60, 160.00, 160.50, 160.80, 162.00, 163.20, 163.50, 164.00, 165.00, 165.60, 166.00, 
166.50, 168.00, 169.50, 170.00, 170.40, 171.00, 172.00, 172.50, 172.80, 174.00, 175.20, 175.50, 176.00, 177.00, 177.60, 178.00, 
178.50, 180.00, 181.50, 182.00, 182.40, 183.00, 184.00, 184.50, 184.80, 186.00, 187.20, 187.50, 188.00, 189.00, 189.60, 190.00, 
190.50, 192.00, 193.50, 194.00, 194.40, 195.00, 196.00, 196.50, 196.80, 198.00, 199.20, 199.50, 200.00, 201.00, 201.60, 202.00, 
204.00, 206.00, 206.40, 207.00, 208.00, 208.80, 210.00, 211.20, 212.00, 213.00, 213.60, 214.00, 216.00, 218.00, 218.40, 219.00, 
220.00, 220.80, 222.00, 223.20, 224.00, 225.00, 225.60, 226.00, 228.00, 230.00, 230.40, 231.00, 232.00, 232.80, 234.00, 235.20, 
236.00, 237.00, 237.60, 238.00, 240.00, 242.00, 242.40, 243.00, 244.00, 244.80, 246.00, 247.20, 248.00, 249.00, 249.60, 250.00, 
252.00, 254.00, 254.40, 255.00, 256.00, 256.80, 258.00, 259.20, 260.00, 261.00, 261.60, 262.00, 264.00, 266.00, 266.40, 267.00, 
268.00, 268.80, 270.00, 271.20, 272.00, 273.00, 273.60, 276.00, 278.40, 279.00, 280.00, 280.80, 282.00, 283.20, 284.00, 285.00, 
285.60, 288.00, 290.40, 291.00, 292.00, 292.80, 294.00, 295.20, 296.00, 297.00, 297.60, 300.00, 302.40, 303.00, 304.00, 304.80, 
306.00, 307.20, 308.00, 309.00, 309.60, 312.00, 314.40, 315.00, 316.00, 316.80, 318.00, 319.20, 320.00, 321.00, 324.00, 327.00, 
328.00, 330.00, 332.00, 333.00, 336.00, 339.00, 340.00, 342.00, 344.00, 345.00, 348.00, 351.00, 352.00, 354.00, 356.00, 357.00, 
360.00, 363.00, 364.00, 366.00, 368.00, 369.00, 372.00, 375.00, 376.00, 378.00, 380.00, 381.00, 384.00, 387.00, 388.00, 390.00, 
392.00, 393.00, 396.00, 399.00, 400.00, 
